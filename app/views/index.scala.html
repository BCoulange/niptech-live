@()(implicit flash: Flash)

@import play.api.cache.Cache
@import play.api.Play.current

@getYouTubeId() = @{
    Cache.getOrElse[String]("youtubeid") {""}
}

@main(None) {
    
    @flash.get("error").map { errorMessage =>
        
        <div class="alert-message error">
            <p>
                <strong>Oops!</strong> @errorMessage
            </p>
        </div>
        
    }
        
    <div class="alert-message block-message info">
        <p>
            @if(getYouTubeId() == "") {
                <br/>
                <h2><center>Il n'y a pas de live actuellement en cours de diffusion</center></h2>
            } else {
                <div style="text-align:center;">
                    <img src="@routes.Assets.at("images/live.png")"/>
                    <h2>@ChatRoom.nbUsers utilisateurs connect√©s</h2>
                </div>
            }
         </p>
    </div>
    @if(getYouTubeId() != "") {
        <div style="text-align:center;">
        <h3>Pour entrer, choisis un pseudo</h3>
        <form action="@routes.Application.chatRoom()">
            <input id="email" name="email" class="input-xxlarge" type="text" placeholder="email" style="font-size:200%; height: 50px;">
            <br/>
            <input id="username" name="username" class="input-xlarge" type="text" placeholder="Pseudo" style="font-size:200%; height: 50px;">
            <button class="btn btn-primary" style="margin-top:-10px; font-size:200%; height: 55px;" type="submit">Connection</button>
        </form>
        </div>
    }
    
}