@()

@import play.api.cache.Cache
@import play.api.Play.current

@getYouTubeId() = @{
    Cache.getOrElse[String]("youtubeid") {
        ""
    }
}

@getYouTubeIdDisplay() = @{
    if (getYouTubeId() == "")
        ("none", "unchecked")
    else
        ("block", "checked")
}

@getTwitterStreamStatus() = @{
    if (Cache.getOrElse[Boolean]("twitterBroadcast") {false})
        "checked"
    else
        "unchecked"
}


@main(None) {

    <h1>Administration de la Chat Room Niptech</h1>
    <br/>
    <br/>
    <div>
        <form action="@routes.Application.configure()">
            <div class="control-group" style="height: 63px;">
                <div class="onairswitch"  style="float: left;">
                    <input type="checkbox" name="onairswitch" class="onairswitch-checkbox" id="myonairswitch" @getYouTubeIdDisplay()._2 style="display: none;"
                        onchange="toggleYoutubeId(this)">
                    <label class="onairswitch-label" for="myonairswitch">
                        <div class="onairswitch-inner"></div>
                        <div class="onairswitch-switch"></div>
                    </label>
                </div>
                <input type="text" name="youtubeid" id="youtubeid" placeholder="Youtube Id"
                  style="display: @getYouTubeIdDisplay()._1;
                      margin-left: 10px;
                      margin-top: 3px;
                      width: 300px;
                      height: 40px;
                      font-size: 23px;
                      font-family: Trebuchet, Arial, sans-serif;
                      font-weight: bold;"
                  value="@getYouTubeId()">
            </div>
            <div class="twitterstreamswitch">
                <input type="checkbox" name="twitterstreamswitch" class="twitterstreamswitch-checkbox" id="mytwitterstreamswitch" @getTwitterStreamStatus() style="display: none;">
                <label class="twitterstreamswitch-label" for="mytwitterstreamswitch">
                    <div class="twitterstreamswitch-inner"></div>
                    <div class="twitterstreamswitch-switch"></div>
                </label>
            </div>
            <div class="control-group">
                <div class="controls" style="margin-left: 0px;">
                    <button type="submit" class="btn btn-primary"
                        style="margin-top: 20px; height: 45px; font-size: 23px;"
                    >Appliquer</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Login Dialog -->
    <div id="login" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="loginLabel" aria-hidden="true">
        <div class="modal-header">
            <h3>Merci de saisir le mot de passe admin</h3>
        </div>
        <div class="modal-body">
            <input type="password" name="password" id="password"
                style="margin-top: 10px;
                    width: 300px;
                    height: 40px;
                    font-size: 23px;
                    font-family: Trebuchet, Arial, sans-serif;
                    font-weight: bold;">
        </div>
        <div class="alert alert-error" id="passworderror" style="display: none">
            Le mot de passe est incorrect. Ne joue pas avec le chat Niptech.
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" onclick="authenticate()" style="height: 45px; font-size: 23px;">Login</button>
        </div>
    </div>

    <script type="text/javascript" charset="utf-8">
        function toggleYoutubeId(element) {
            if ($('#myonairswitch').is(':checked')) {
               $('#youtubeid').fadeIn(1000);
            } else {
               $('#youtubeid').fadeOut(1000);
               $('#youtubeid').val('')
            }
        }

        function checkPassword(string) {
            return hex_md5(string) == "6b1d5323bb98f4c9fd953884689722bd"
        }

        function authenticate() {
            if (checkPassword(document.getElementById('password').value)) {
             $('#login').modal('hide')
            } else $('#passworderror').show()
        }



        window.onload=$('#login').modal({
                backdrop: 'static',
                keyboard: false
                })
    </script>

    <script src="@routes.Assets.at("javascripts/md5-min.js")" type="text/javascript"></script>

}

